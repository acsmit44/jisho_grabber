# jisho_grabber: A Program for Creating Anki Notes from Jisho Searches

`jisho_grabber` allows the user to enter a search word, select a result, select one of the result's definitions, and add it to their Anki deck with the click of a button (okay, four buttons, but you get the idea).

*This program and its author are not affiliated with the main Anki project or Jisho.org in any way.*

## Motivation

Up until winter of 2020, I always had a hard time studying Japanese.  Finding the motivation to learn new vocab and whatnot never came easy to me, despite the fact that I'd say I'm passionate about learning Japanese.  I knew about Anki, but didn't seriously start using it until that winter.  When I finally created some decks for vocab, studying became significantly easier.  Along with vocabulary, I also created a deck (a subset of [this all-in-one kanji deck](https://ankiweb.net/shared/info/798002504)) of all kanji with frequency rankings of 1-2500.  In addition to rote memorization, I began studying by reading and watching some stuff in Japanese without aid such as English subtitles.  During my reading or watching, I would frequently come across a word that felt significant enough to search on Jisho.  Whether it was because it came up often, or it felt familiar, or because I straight-up had no idea what the hell it meant and couldn't help but look, I found myself searching with *great* frequency.  However, here's how searching one of said words on Jisho always went:

*Hears word* "Oh that seems important, I should look it up" -> *Searches word* "Wow cool, I'll have to remember this word and its meaning" -> 1 min pass -> Word forgotten -> repeat

Maybe the *one* exception to this is 変身する, which is a suru-verb meaning "to transform"/"to shapeshift", and the only reason I can remember this one is because they say it like 20 times an episode in the season of [Precure](https://anilist.co/anime/603/) that I'm watching right now.

Because of this, I decided to code a Chrome extension that would let me select a word on a Jisho page and turn it into an Anki note.  Turns out Chrome's API is garbage, the documentation is comically outdated, there is hardly anyone talking about Chrome extensions on StackExchange, and I didn't want to figure out how to convert raw text into Anki notes anyway.  Because of this, I decided to not code a Chrome extension that would let me select a word on a Jisho page and turn it into an Anki note.

And then it hit me.  Why don't I just make my own GUI that displays Jisho search results?  That way, I could just make my own interface and decide how it works.  Plus, I had just discovered a Python library that can dump a bunch of info into an Anki note.

Anyway, long story short, I wrote this program because I'm too lazy to take the 15 seconds to search a word and then manually input a new note into Anki.  That is why I spent 30 hours over the last 3 days writing a program that would cut that time down from 15 seconds to 10.

## Dependencies

This program was written in Python version 3.8.5.  It depends on four Python libraries: BeautifulSoup4, requests, wxPython, and [genanki](https://github.com/kerrickstaley/genanki).  BeautifulSoup4, requests, and wxPython can be installed with a simple `pip install {library name}` command on both Windows (I used PowerShell and it worked just fine) and Linux/Mac.  Installing genanki is very simple as well.  First, clone the repository.  Then, on Linux/Mac, cd into the repository directory and use `make` to run the Makefile, which will do the work for you.  On Windows, open a Powershell window as admin, cd into the repository directory, and run the command `python setup.py install --user` to install (or `python3` depending on your command shortcut).

## Running the Program

Once you have cloned the repository, cd into the jisho_grabber directory.  Once you are there, to run the program, you can just run the command `python ./source/main.py` (or, again, maybe `python3`, it just depends on your command).  This should make the GUI pop up.  __Note that the program will lag whenever a word is searched or whenever the user scrolls 20 words forward.__  This is simply because loading the webpage info takes a bit, and Jisho search pages have 20 entries per.  Hopefully my UI design is self-explanatory enough that I don't need to explain it, but I will explain it here just in case.
- To search a word, enter text into the top text box and press the "Search" button.  You will get a "No results" error if your search yielded no matching words.  Note that all text fields aside from the search field are not user-editable and are only there to display information.
- To flip between results, use the "Previous result" and "Next result" buttons.  You will get error messages accordingly.
- Once you have reached a desired word, select a meaning from the list of meanings.  This will be the meaning that gets put in the Anki note.  The default meaning is 1 and words without meaning (wow that's so deep omg) will not have options in the dropdown.
- To add a word to your Anki deck, press the "Add to Deck" button.  You can add multiple words at a time, but my program isn't that smart, so don't get cheeky and mash the button or something.  You'll probably get a bunch of dupes.  Anki handles dupes just fine, so it shouldn't really matter, but it's still nice to not have them.
Once the GUI window has been closed, the program will begin the data dump process.  Two files are written to during this process: vocab_words.json and jisho_search_deck.apkg.  Basically, the vocab_words.json file stores every word you have ever added, so if you ever want to delete a word for some reason (didn't mean to add it, accidentally added a dupe, don't want your parents finding your Jisho word search history, etc.), you need to delete it there.  And I mean you *need* to delete it there because the json will get loaded every time the program starts, so even if you delete it from your anki deck, it will get exported by my program again.  Unfortunately, some of the funkier UTF-8 characters get encoded when dumped into a json file, so instead of seeing the word `霞む`, you'll see `\u971e\u3080`.  Next, the jisho_search_deck.apkg stores all the words you've ever added.  Originally, I had two .apkg files, one for new words and one for all words.  For some reason, every time you run the program and import all words, Anki says old notes are "updated."  At first, I was afraid this would cause problems, but [someone on the internet said that it won't](https://superuser.com/questions/698902/can-i-create-an-anki-deck-from-a-csv-file/1127023#answer-1127023), so I guess that puts those worries to rest.

Finally, having to navigate to the command line and write out all these commands every time can be annoying.  I don't know how to remedy this on Linux/Mac, but on Windows, you can make a batch file.  It's really, really easy.  Just open a new text file in NotePad, type `"path-to-Python-folder-here/python.exe" "path-to-jisho_grabber/source/main.py"`, and save it as a .bat file in the jisho_grabber folder (again, make sure it's directly inside jisho_grabber and not in source or something).  For example, mine is `"C:\Users\Andy\AppData\Local\Programs\Python\Python39\python.exe" "C:\Users\Andy\Documents\personal_projects\jisho_grabber\source\main.py"`.  Now when you run this .bat file, it will just run the script for you.  Additionally, you can create a shortcut for the batch file, go into properties, add `C:\Windows\System32\cmd.exe /C ` to the front of the target field, and now you can pin the shortcut to your taskbar.  You'll be able to run the program by literally clicking your mouse once.

## Missing Features

- For now, there is only one style of Anki deck available and it is hard-coded in.  It contains all fields of information that this program is currently capable of extracting from Jisho.  I may be adding custom Note and Model creation in the future, but doing so strays away from the primary focus of this program, which is just a quick-and-dirty way of creating Anki notes from Jisho word searches and adding them all to one big, fat, juicy Anki deck.
- Example sentences and additional information do not get added to the cards.  This might be a feature that I will implement once this program is fully-functional with the base features.  __Update__: This program is fully-functional now, but I am not.  So whether or not new features get added depends on my level of laziness.

## Important Notes

Please note that my search program literally looks up the word as it is typed in, and that the program is only built to handle *words* and not kanji searches.  Because of the way jisho's website is formatted, the method of grabbing kanji information is different from word information.  Additionally, note that Jisho's search engine will try its darndest to interpret words written in the English alphabet as romaji.  For example, if you search the word fun, Jisho will convert it to ふん and search for that instead.  To remedy this, one must search with quotation marks, such as "fun".

Also note that my program is not perfect, and neither is Jisho, so there are a lot of weird bugs that are basically unfixable.  For example, if you search the word "暖簾" on Jisho, you'll notice that the furigana is kinda weird.  That's because Jisho is displaying the *whole word's* furigana above just the first kanji.  Unfortunately, without knowing the readings of the kanji, there's nothing I can do to fix this problem.  And writing code to fix this problem would be its entire own project.  I have found this bug to be rather rare, so if you really want your furigana to be perfect all the time, you'll have to fix it yourself if this problem arises.